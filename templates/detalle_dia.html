{% extends "base.html" %}
{% block title %}ğŸ“… Detalle del DÃ­a{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
  <h2 class="text-center text-primary fw-bold mb-4">
    ğŸ“… Detalle de Caja â€” {{ fecha|hora_chile }}
  </h2>

  <!-- ğŸ’° Totales del dÃ­a -->
  <div class="card shadow-sm border-0 mb-4">
    <div class="card-body bg-light">
      <h5 class="mb-3 fw-bold text-dark">ğŸ’° Resumen General</h5>
      <p><strong>ğŸ›’ Total Ventas:</strong> ${{ "%.2f"|format(total_ventas) }}</p>
      <p><strong>ğŸ’µ Entradas de Efectivo:</strong> ${{ "%.2f"|format(total_entradas) }}</p>
      <p><strong>ğŸ’¸ Salidas de Efectivo:</strong> ${{ "%.2f"|format(total_salidas) }}</p>
      <p><strong>ğŸ§¾ Gastos:</strong> ${{ "%.2f"|format(total_gastos) }}</p>
      <hr>
      <h5 class="fw-bold text-success text-end">
        ğŸ’¼ Neto del DÃ­a: ${{ "%.2f"|format(neto) }}
      </h5>
      <!-- âœ… Mostrar la hora de generaciÃ³n con hora local de Chile -->
      <p class="text-muted text-end mt-2">
        â° Generado a las: <strong>{{ hora_chile() }}</strong>
      </p>
    </div>
  </div>

  <!-- ğŸ“¦ Ventas por producto -->
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <h5 class="fw-bold text-dark">ğŸ“¦ Ventas por Producto</h5>

      {% if detalle %}
      <div class="table-responsive mt-3">
        <table class="table table-striped table-hover text-center align-middle shadow-sm">
          <thead class="table-dark">
            <tr>
              <th>Producto</th>
              <th>Cantidad Vendida</th>
              <th>Valor Total</th>
            </tr>
          </thead>
          <tbody>
            {% for d in detalle %}
            <tr>
              <td class="fw-semibold">{{ d.producto }}</td>
              <td>{{ d.vendidas }}</td>
              <td class="text-success fw-bold">${{ "%.2f"|format(d.valor) }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
      <div class="alert alert-info mt-3 text-center">
        No hay ventas registradas en esta fecha.
      </div>
      {% endif %}
    </div>
  </div>

  <!-- ğŸ”™ BotÃ³n volver -->
  <div class="text-center mt-5">
    <a href="{{ url_for('app_rutas.liquidacion') }}" class="btn btn-secondary px-4 fw-bold shadow-sm">
      ğŸ”™ Volver a LiquidaciÃ³n
    </a>
  </div>
</div>
{% endblock %}
