{% extends "base.html" %}
{% block title %}📈 Detalle de Ventas — {{ fecha|hora_chile }}{% endblock %}

{% block content %}
<div class="container mt-4 mb-5">
  <!-- 🔹 Encabezado -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary mb-0">
      📈 Detalle de Ventas — {{ fecha|hora_chile }}
    </h2>
    <a href="{{ url_for('app_rutas.liquidacion') }}" class="btn btn-outline-dark fw-semibold shadow-sm">
      ⬅ Volver
    </a>
  </div>

  <!-- 📋 Tabla -->
  {% if ventas %}
  <div class="table-responsive">
    <table class="table table-striped table-hover text-center align-middle shadow-sm">
      <thead class="table-dark">
        <tr>
          <th>🕒 Hora</th>
          <th>📦 Producto</th>
          <th>🔢 Cantidad</th>
          <th>💰 Ingreso</th>
        </tr>
      </thead>
      <tbody>
        {% for v in ventas %}
        <tr>
          <!-- 🕒 Hora ajustada a Chile -->
          <td class="text-primary fw-semibold">{{ v.fecha|hora_chile }}</td>
          <td class="fw-bold">{{ v.producto.nombre }}</td>
          <td>{{ v.cantidad }}</td>
          <td class="text-success fw-bold">${{ "%.2f"|format(v.ingreso) }}</td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot class="table-secondary fw-bold">
        <tr>
          <td colspan="3" class="text-end">🧾 Total del Día</td>
          <td>${{ "%.2f"|format(total_dia) }}</td>
        </tr>
      </tfoot>
    </table>
  </div>
  {% else %}
  <div class="alert alert-info text-center shadow-sm mt-4">
    📭 No se registraron ventas en esta fecha.
  </div>
  {% endif %}

  <!-- 👣 Pie -->
  <footer class="text-center mt-5 text-muted small">
    <hr>
    💻 Hecho con ❤️ por <strong>Manuel Herrera</strong><br>
    <span class="text-secondary">Sistema de Inventario y Ventas — versión estable</span>
  </footer>
</div>
{% endblock %}

{% block scripts %}
<!-- 🔧 Espacio reservado para scripts específicos -->
{% endblock %}
